<!DOCTYPE html>
<html lang="km">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ចូលគណនី</title>
    <link rel="icon" type="image/png" href="../images/rupp_logo.png" />
    <link rel="stylesheet" href="../css/login.css" />
  </head>

  <body>
    <main>
      <div class="header-container">
        <div class="logo">
          <a href="/"
            ><img
              src="../images/rupp_logo.png"
              alt="Logo"
              width="150"
              height="150"
          /></a>
        </div>
      </div>
      <section class="login-section">
        <div class="login-container">
          <h2 class="section-title">ចូលគណនី</h2>
          <form id="login-form" action="../php/login.php" method="POST">
            <div class="form-group">
              <label for="email">អ៊ីមែល:</label>
              <input
                type="email"
                id="email"
                name="email"
                placeholder="បញ្ចូលអ៊ីមែលរបស់អ្នក"
                required
              />
            </div>
            <div class="form-group">
              <label for="password">ពាក្យសម្ងាត់:</label>
              <input
                type="password"
                id="password"
                name="password"
                placeholder="បញ្ចូលពាក្យសម្ងាត់"
                required
              />
            </div>
            <!-- forgot password -->
            <div class="form-group">
              <div class="forgot-password-container">
                <a
                  href="#"
                  class="forgot-password-link"
                  onclick="showContactMessage(event)"
                  >ភ្លេចពាក្យសម្ងាត់?</a
                >
              </div>
            </div>
            <div class="form-group">
              <button type="submit" class="login-btn">ចូល</button>
            </div>
          </form>
        </div>
      </section>
    </main>
    <script>
      function showContactMessage(event) {
        event.preventDefault(); // Prevent the default link behavior
        alert(
          "សូមទំនាក់ទំនងអ្នកគ្រប់គ្រង IT៖ 0975547225\nMail Server កំពុងជួសជុល"
        );
      }
      // check if exist the cookie data for user
      // Function to get cookie value
      function getCookie(name) {
        let match = document.cookie.match(
          new RegExp("(^| )" + name + "=([^;]+)")
        );
        return match ? decodeURIComponent(match[2]) : null;
      }

      // Get email & password from cookies
      const email = getCookie("student_email");
      const password = getCookie("student_password");
      // If cookies exist, auto-fill the form and submit it
      if (email && password) {
        document.getElementById("email").value = email;
        document.getElementById("password").value = password;

        // Auto-submit the form
        document.getElementById("login-form").submit();
      }
    </script>
  </body>
</html>
